{"ast":null,"code":"import _toConsumableArray from\"/Users/asfandyarkhan/Desktop/part_select/parts-select/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/asfandyarkhan/Desktop/part_select/parts-select/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/asfandyarkhan/Desktop/part_select/parts-select/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/asfandyarkhan/Desktop/part_select/parts-select/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef}from\"react\";import\"./ChatWindow.css\";import{marked}from\"marked\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ChatWindow(){var defaultMessage=[{role:\"assistant\",content:\"Hi, how can I help you today?\"}];var _useState=useState(defaultMessage),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),input=_useState4[0],setInput=_useState4[1];var messagesEndRef=useRef(null);var scrollToBottom=function scrollToBottom(){messagesEndRef.current.scrollIntoView({behavior:\"smooth\"});};useEffect(function(){scrollToBottom();},[messages]);var getAIMessage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(userInput){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('http://localhost:5000/api/ai-message',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({input:userInput})});case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;console.log(\"Received data from backend:\",data);// Debugging line\nif(response.ok){_context.next=10;break;}throw new Error(\"Failed to fetch AI response\");case 10:return _context.abrupt(\"return\",{role:'assistant',content:data.response||data});case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.error('Failed to fetch data:',_context.t0);return _context.abrupt(\"return\",{role:'assistant',content:\"Error processing your request.\"});case 17:case\"end\":return _context.stop();}},_callee,null,[[0,13]]);}));return function getAIMessage(_x){return _ref.apply(this,arguments);};}();var handleSend=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var trimmedInput,newMessage;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:trimmedInput=input.trim();if(!trimmedInput){_context2.next=8;break;}setMessages(function(prevMessages){return[].concat(_toConsumableArray(prevMessages),[{role:\"user\",content:trimmedInput}]);});setInput(\"\");_context2.next=6;return getAIMessage(trimmedInput);case 6:newMessage=_context2.sent;setMessages(function(prevMessages){return[].concat(_toConsumableArray(prevMessages),[newMessage]);});case 8:case\"end\":return _context2.stop();}},_callee2);}));return function handleSend(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"messages-container\",children:[messages.map(function(message,index){return/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(message.role,\"-message-container\"),children:message.content&&/*#__PURE__*/_jsx(\"div\",{className:\"message \".concat(message.role,\"-message\"),children:/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:marked(message.content).replace(/<p>|<\\/p>/g,\"\")}})})},index);}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-area\",children:[/*#__PURE__*/_jsx(\"input\",{value:input,onChange:function onChange(e){return setInput(e.target.value);},placeholder:\"Type a message...\",onKeyPress:function onKeyPress(e){if(e.key===\"Enter\"&&!e.shiftKey){handleSend();e.preventDefault();}},rows:\"3\"}),/*#__PURE__*/_jsx(\"button\",{className:\"send-button\",onClick:handleSend,children:\"Send\"})]})]});}export default ChatWindow;","map":{"version":3,"names":["React","useState","useEffect","useRef","marked","jsx","_jsx","jsxs","_jsxs","ChatWindow","defaultMessage","role","content","_useState","_useState2","_slicedToArray","messages","setMessages","_useState3","_useState4","input","setInput","messagesEndRef","scrollToBottom","current","scrollIntoView","behavior","getAIMessage","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","userInput","response","data","wrap","_callee$","_context","prev","next","fetch","method","headers","body","JSON","stringify","sent","json","console","log","ok","Error","abrupt","t0","error","stop","_x","apply","arguments","handleSend","_ref2","_callee2","trimmedInput","newMessage","_callee2$","_context2","trim","prevMessages","concat","_toConsumableArray","className","children","map","message","index","dangerouslySetInnerHTML","__html","replace","ref","value","onChange","e","target","placeholder","onKeyPress","key","shiftKey","preventDefault","rows","onClick"],"sources":["/Users/asfandyarkhan/Desktop/part_select/parts-select/src/components/ChatWindow.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport \"./ChatWindow.css\";\nimport { marked } from \"marked\";\n\nfunction ChatWindow() {\n  const defaultMessage = [{\n    role: \"assistant\",\n    content: \"Hi, how can I help you today?\"\n  }];\n\n  const [messages, setMessages] = useState(defaultMessage);\n  const [input, setInput] = useState(\"\");\n  const messagesEndRef = useRef(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const getAIMessage = async (userInput) => {\n    try {\n      const response = await fetch('http://localhost:5000/api/ai-message', {\n        method: 'POST',\n        headers: {'Content-Type': 'application/json'},\n        body: JSON.stringify({ input: userInput })\n      });\n      const data = await response.json();\n      console.log(\"Received data from backend:\", data);  // Debugging line\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch AI response\");\n      }\n      // Adjust this part to directly use 'data' if the response is plain text or directly structured\n      return { role: 'assistant', content: data.response || data };\n    } catch (error) {\n      console.error('Failed to fetch data:', error);\n      return { role: 'assistant', content: \"Error processing your request.\" };\n    }\n};\n\n\n  const handleSend = async () => {\n    const trimmedInput = input.trim();\n    if (trimmedInput) {\n      setMessages(prevMessages => [...prevMessages, { role: \"user\", content: trimmedInput }]);\n      setInput(\"\");\n\n      const newMessage = await getAIMessage(trimmedInput);\n      setMessages(prevMessages => [...prevMessages, newMessage]);\n    }\n  };\n\n  return (\n    <div className=\"messages-container\">\n      {messages.map((message, index) => (\n        <div key={index} className={`${message.role}-message-container`}>\n          {message.content && (\n            <div className={`message ${message.role}-message`}>\n              <div dangerouslySetInnerHTML={{__html: marked(message.content).replace(/<p>|<\\/p>/g, \"\")}}></div>\n            </div>\n          )}\n        </div>\n      ))}\n      <div ref={messagesEndRef} />\n      <div className=\"input-area\">\n        <input\n          value={input}\n          onChange={(e) => setInput(e.target.value)}\n          placeholder=\"Type a message...\"\n          onKeyPress={(e) => {\n            if (e.key === \"Enter\" && !e.shiftKey) {\n              handleSend();\n              e.preventDefault();\n            }\n          }}\n          rows=\"3\"\n        />\n        <button className=\"send-button\" onClick={handleSend}>\n          Send\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default ChatWindow;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}